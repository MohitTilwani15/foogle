(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-253742d8"],{"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in i||a("9e1e")&&n(i,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},8169:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.items&&t.items.length?a("div",[a("ul",{staticClass:"collection with-header"},[a("li",{staticClass:"collection-header"},[a("h4",[t._v(t._s(t.title))])]),t._l(t.items,function(e){return a("li",{key:e.id,staticClass:"collection-item"},[a("div",[t._v("\n        "+t._s(e.name)),a("br"),t._v("\n        "+t._s(e.location.address)),a("br"),a("strong",[t._v(t._s(t._f("validDistance")(e.location.distance)))]),t.setFavorite?a("a",{staticClass:"secondary-content",attrs:{href:"#"},on:{click:function(a){return t.setFavorite(e.id)}}},[a("i",{staticClass:"material-icons"},[t._v("star_border")])]):t._e()])])})],2)]):t._e()},i=[],s={name:"results",props:{title:{type:String},items:{type:Array},setFavorite:{type:Function}},filters:{validDistance:function(t){if(t)return"".concat(t/1e3," KM")}}},o=s,r=a("2877"),c=Object(r["a"])(o,n,i,!1,null,null,null);e["a"]=c.exports},bb51:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.locationError?a("div",{staticClass:"row"},[a("form",{staticClass:"col s12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s6"},[a("i",{staticClass:"material-icons prefix"},[t._v("location_on")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],attrs:{id:"icon_prefix",type:"text"},domProps:{value:t.location},on:{input:function(e){e.target.composing||(t.location=e.target.value)}}}),a("label",{attrs:{for:"icon_prefix"}},[t._v("location")]),a("a",{staticClass:"waves-effect waves-light btn-large",on:{click:t.fetchRestaurantsFromUserInput}},[t._v("Button")])])])])]):t._e(),a("div",{staticClass:"input-field col s12"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.sort=e.target.multiple?a:a[0]},t.onSortChange]}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Choose your option")]),a("option",{attrs:{value:"distance"}},[t._v("Distance")])]),a("label",[t._v("Sort By")])]),a("results",{attrs:{title:"Restaurants",items:t.restaurants,"set-favorite":t.setFavorite}}),t.restaurants.length?a("pagination",{attrs:{next:t.next,prev:t.prev}}):t._e()],1)},i=[],s=(a("7f7f"),a("cebc")),o=a("2f62"),r=a("3475"),c=a("4359"),l=a("8169"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"pagination"},[a("li",{staticClass:"waves-effect"},[a("a",{on:{click:t.prev}},[a("i",{staticClass:"material-icons"},[t._v("chevron_left")])])]),a("li",{staticClass:"waves-effect"},[a("a",{on:{click:t.next}},[a("i",{staticClass:"material-icons"},[t._v("chevron_right")])])])])},d=[],f={name:"pagination",props:{prev:{type:Function,default:function(){},required:!0},next:{type:Function,default:function(){},required:!0}}},h=f,p=a("2877"),v=Object(p["a"])(h,u,d,!1,null,null,null),m=v.exports,g={name:"home",components:{results:l["a"],pagination:m},data:function(){return{pageNo:1,pageLimit:10,locationError:!1,location:"",sort:""}},computed:Object(s["a"])({},Object(o["b"])({total:"searchRestaurantModule/getTotalRestaurantsCount",isAuthenticated:"userModule/isAuthenticated"}),{restaurants:function(){return this.$store.getters["searchRestaurantModule/getRestaurants"](this.pageNo,this.pageLimit)}}),mounted:function(){this.initializeSelect(),this.getUserLocation()},methods:Object(s["a"])({},Object(o["c"])({sortRestaurants:"searchRestaurantModule/".concat(c["c"])}),{getUserLocation:function(){if(!navigator.geolocation)throw new Error("Geolocation feature not suported");navigator.geolocation.getCurrentPosition(this.fetchRestaurants,this.handlePositionError)},initializeSelect:function(){var t=document.querySelectorAll("select");window.M.FormSelect.init(t,{})},onSortChange:function(t){this.$router.push({name:this.$route.name,query:{sort:t.target.value}}),this.sortRestaurants()},fetchRestaurants:function(t){this.$store.dispatch("searchRestaurantModule/".concat(r["c"]),{ll:"".concat(t.coords.latitude,",").concat(t.coords.longitude)})},fetchRestaurantsFromUserInput:function(){this.$store.dispatch("searchRestaurantModule/".concat(r["c"]),{near:this.location})},handlePositionError:function(){this.locationError=!0},setFavorite:function(t){this.isAuthenticated?this.$store.dispatch("userModule/".concat(r["d"]),{VENUE_ID:t,set:1}):window.M.toast({html:"Please login to set favorites",classes:"rounded"})},prev:function(){this.pageNo>1&&(this.pageNo-=1)},next:function(){this.total/this.pageLimit>this.pageNo&&(this.pageNo+=1)}})},_=g,C=Object(p["a"])(_,n,i,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-253742d8.400f47ca.js.map